;/*FB_PKG_DELIM*/

__d("MAWAttachmentBlob.react",["MAWBridgeSendAndReceive","MAWDbMedia","MAWDbXMA","Promise","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=new Map();function k(a){var b=i.get(a);if(b!=null){if(b.TAG===0)throw b.value;return b.value}b=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{mediaId:d("MAWDbMedia").convertNumberToMediaId(Number.parseInt(a,10))}).then(function(b){i.set(a,{TAG:1,value:URL.createObjectURL((b=b)!=null?b:void 0)})})["catch"](function(b){i.set(a,{TAG:1,value:""}),c("recoverableViolation")("Unable to getBlobUrlByMediaId","messenger_e2ee_web",{error:b})});i.set(a,{TAG:0,value:b});throw b}function a(a){if(a!=null&&a.hasMedia!==!1)return k(a.attachmentFbid);return a!=null&&a.hasXma!==!1?l(a,"preview"):""}function l(a,c){if(a==null)return"";var e=j.get(a.attachmentFbid+c);if(e!=null){if(e.TAG===0)throw e.value;return e.value}e=d("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByXMAId",{infoType:c,xmaId:d("MAWDbXMA").convertNumberToXMAId(Number.parseInt(a.attachmentFbid,10))}).then(function(d){j.set(a.attachmentFbid+c,{TAG:1,value:URL.createObjectURL((d=d)!=null?d:void 0)});return(h||(h=b("Promise"))).resolve()})["catch"](function(b){j.set(a.attachmentFbid+c,{TAG:1,value:""})});j.set(a.attachmentFbid+c,{TAG:0,value:e});throw e}g.getAttachmentBlobNonOptional=k;g.getAttachmentBlob=a;g.getInfoUrlXMA=l}),98);
__d("MAWFilePressable.react",["fbt","CometErrorBoundary.react","FBLogger","I64","MAWAttachmentBlob.react","MWChatMessageId","MWFileViewerLogger","MWXPressable.react","formatFileSize","goUriOnNewWindow","react","useMWFileOnPress"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react")),l=i.useCallback,m={filePressable:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},n=h._("__JHASH__uiTAWyhPCWI__JHASH__");function o(a){return a.filesize==null?null:c("formatFileSize")((j||(j=d("I64"))).to_int32(a.filesize))}function p(a){var b=a.children,d=a.linkProps,e=a.onPress;a=a.testid;return k.jsx(c("MWXPressable.react"),{display:"inline",linkProps:d,onPress:e,overlayDisabled:!0,testid:void 0,xstyle:m.filePressable,children:b})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.attachmentID,e=a.children,f=a.entrypoint,g=a.linkProps,h=a.messageID,i=a.onPress;a=a.testid;a=c("useMWFileOnPress")(h,b,i,f,d("MWFileViewerLogger").generateSessionId());return k.jsx(p,{linkProps:g,onPress:a,testid:void 0,children:e})}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b=a.children,e=a.entrypoint,f=a.file,g=a.onPress;a=a.testid;a=((a=f.filename)!=null?a:n).toString();var h=d("MAWAttachmentBlob.react").getAttachmentBlob(f),i=d("MWChatMessageId").makeSent((j||(j=d("I64"))).to_string(f.threadKey),f.messageId,j.to_string(f.timestampMs)),m={download:a,target:"_blank",url:h},r=o(f),s=l(function(a,b){c("FBLogger")("rpp_file_viewer","cannot_load_entry_point").mustfix(a.message||"Cannot open file viewer in "+b),c("goUriOnNewWindow")(h)},[h]);return i.type==="sent"?k.jsx(c("CometErrorBoundary.react"),{onError:s,children:k.jsx(q,{attachmentID:f.attachmentFbid,entrypoint:e,linkProps:m,messageID:i.value,onPress:g,testid:void 0,children:b({filename:a,messageID:i,size:r})})}):k.jsx(p,{linkProps:m,onPress:g,testid:void 0,children:b({filename:a,messageID:i,size:r})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWChatFile.react",["MAWFilePressable.react","MDSTextPairing.react","MWChatFilePreview.react","MWInboxInfoSharedContentQPLLogger","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={content:{color:"xzsf02u",flexGrow:"x1iyjqo2",fontWeight:"x1s688f",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",wordBreak:"x13faqbe",$$css:!0},fileSize:{paddingTop:"x889kno",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",userSelect:"x87ps6o",$$css:!0}};function l(){d("MWInboxInfoSharedContentQPLLogger").logOpenSharedContentFromThread("files")}function a(a){var b=a.file;return j.jsx(c("MAWFilePressable.react"),{entrypoint:"chat_file_v4",file:b,onPress:l,testid:void 0,children:function(a){var d=a.filename;a=a.size;return j.jsxs("div",{className:(h||(h=c("stylex")))(k.root,!1),children:[j.jsx(c("MWChatFilePreview.react"),{attachment:b,withPreview:!1}),j.jsxs("div",{className:"xzsf02u x1iyjqo2 x1s688f xz9dl7a xn6708d xsag5q8 x1ye3gou x13faqbe",children:[j.jsx(c("MDSTextPairing.react"),{headline:d,headlineLineLimit:3,level:4}),j.jsx("div",{className:"x889kno",children:j.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:"secondary",bodyLineLimit:1,level:4})})]})]})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCMBulkInviteDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWCMBulkInviteDialog.react").__setRef("MWCMBulkInviteDialog.entrypoint")};g["default"]=a}),98);
__d("MWGetChatTabOpenQPLEventTrace",["I64","InteractionTracing","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=c("qpl")._(30609204,"1682"),f=c("qpl")._(30605380,"18"),g=c("InteractionTracing").getPendingInteractions();for(var g=g,i=Array.isArray(g),j=0,g=i?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k,l;if(i){if(j>=g.length)break;l=g[j++]}else{j=g.next();if(j.done)break;l=j.value}l=l;if(((k=l.getTrace())==null?void 0:k.qplEvent)===e||((k=l.getTrace())==null?void 0:k.qplEvent)===f){((k=l.getTrace())==null?void 0:(k=k.annotations.string)==null?void 0:k.thread_id)===(h||(h=d("I64"))).to_string(a)&&b(l)}}}g["default"]=a}),98);
__d("MWBlockedComposerLogging",["$InternalEnum","Int64Hooks","MWGetChatTabOpenQPLEventTrace","MWLSThreadDisplayContext","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=b("$InternalEnum")({USER_BLOCKED_CANNOT_MESSAGE:"user_blocked_cannot_message",USER_BLOCKED_CANNOT_REPLY:"user_blocked_cannot_reply",USER_RESTRICTED:"user_restricted",GAMING_GAME_BOT:"gaming_game_bot",GAMING_GET_STARTED_CTA:"gaming_get_started_cta",FEATURE_LIMITED_TO_READONLY:"feature_limited_to_readonly",PAGE_THREAD_DISABLED:"page_thread_disabled",USER_BLOCKED:"user_blocked",USER_UNREACHABLE:"user_unreachable",ARMADILLO_THREAD_ALREADY_CUTOVER:"thread_already_cutover",ARMADILLO_GROUP_THREAD_CUTOVER:"cutover_group_thread",ARMADILLO_DEFAULT_E2EE_ONE_TO_ONE_BLOCK:"default_e2ee_one_to_one_block",ARMADILLO_RECEIVER_NON_ADDRESSABLE_ON_WA:"receiver_non_addressable_on_wa",ARMADILLO_DUAL_THREAD_CUTOVER:"dual_thread_cutover",NOT_BLOCKED:"not_blocked"});function a(a,b){var e=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();d("Int64Hooks").useEffectInt64(function(){if(a==null)return;c("MWGetChatTabOpenQPLEventTrace")(a,function(a){if(b===i.NOT_BLOCKED){var d,e=a.getTrace();d=e==null?void 0:(d=e.annotations.string)==null?void 0:d.previousBlockingReason;e=e==null?void 0:e.markerPoints.blocked_composer;var f=(h||(h=c("performanceNow")))();e=e==null?void 0:e.timestamp;d!=null&&a.addAnnotation("prevBlockingReason",d);a.addSubspan("secure_composer_visible","AppTiming",(d=e)!=null?d:f,f)}else a.addAnnotation("composerBlockingReason",b),a.addMarkerPoint("blocked_composer","AppTiming",(h||(h=c("performanceNow")))(),{composerBlockingReason:b})})},[e,b,a])}g.ComposerBlockingReason=i;g.useLogMWBlockedComposerReason=a}),98);
__d("MWFailChatTabOpenQPLEvent",["MWGetChatTabOpenQPLEventTrace"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("MWGetChatTabOpenQPLEventTrace")(a,function(a){a.failTrace(b,!0)})}g["default"]=a}),98);
__d("useMAWThreadLastMessageConsistencyLoggingPerformLog",["CometDebounce","I64","Int64Hooks","MAWBridgeSendAndReceive","Promise","WATimeUtils","asyncToGeneratorRuntime","logMessengerWebFalcoEvent","promiseDone","useMWEntrypoint"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("CometDebounce")(c("logMessengerWebFalcoEvent")),k=5;function a(){var a=c("useMWEntrypoint")();return d("Int64Hooks").useCallbackInt64(function(e){var f=e.threadKey,g=e.threadLastActivityTimeMs,p=e.threadLastMessageTimeMs,q=e.threadType;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(i||(i=d("I64"))).compare(p,g)>-1;c={hasMissingMessage:!c,threadLastActivityTimeMs:i.to_string(g),threadLastMessageTimeMs:i.to_string(p)};try{var e=(yield (h||(h=b("Promise"))).all([d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadLastNumMessagesByServerTs",{numMsgs:k,threadKey:(i||(i=d("I64"))).to_string(f)}),d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadLastNumMessagesBySortOrder",{numMsgs:k,threadKey:i.to_string(f)})])),r=e[0];e=e[1];j({threadKey:f,threadType:q},"thread_and_message_list_last_activity_mismatch",a,babelHelpers["extends"]({},c,{armadilloThreadLastMsgAuthoritativeTs:l(r),armadilloThreadLastMsgTs:m(e),isLastMsgsSetConsistent:n(r,e).toString(),lastNumMsgsByServerTs:o(r),lastNumMsgsBySortOrder:o(e)}))}catch(b){j({threadKey:f,threadType:q},"thread_and_message_list_last_activity_mismatch",a,c)}})())},[a])}function l(a){var b;return((b=a[0])==null?void 0:b.serverTs)!=null?d("WATimeUtils").castUnixTimeToMillisTime(a[0].serverTs).toString():""}function m(a){return(a=(a=a[0])==null?void 0:(a=a.sortOrderMs)==null?void 0:a.toString())!=null?a:""}function n(a,b){b=b.filter(function(a){return a.serverTs!=null});return b.every(function(b,c){return b.msgId===a[c].msgId})}function o(a){a=a.map(function(a){return{msgId:a.msgId,serverTsInMillis:a.serverTs!=null?d("WATimeUtils").castUnixTimeToMillisTime(a.serverTs):"",sortOrderMs:a.sortOrderMs,type:a.type}});return JSON.stringify(a)}g["default"]=a}),98);
__d("useMAWThreadLastMessageConsistencyLogging",["I64","Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWStateContext.react","Promise","ReQL","asyncToGeneratorRuntime","promiseDone","react","useMAWThreadLastMessageConsistencyLoggingPerformLog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).useRef;function a(a){var e=(j||(j=c("useReStore")))(),f=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector()),g=c("useMAWThreadLastMessageConsistencyLoggingPerformLog")(),k=l(null);d("Int64Hooks").useEffectInt64(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableDescending(e.table("threads")).getKeyRange(a)),d("ReQL").firstAsync(d("ReQL").fromTableDescending(e.table("messages")).getKeyRange(a)),d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(e.table("reactions")).getKeyRange(a).take(20))])),j=c[0],l=c[1];c=c[2];if(l==null||j==null)return;if(f)return;if(k.current===a)return;k.current=a;c=c.reduce(function(a,b){return(i||(i=d("I64"))).max(a,(a=b.reactionCreationTimestampMs)!=null?a:(i||(i=d("I64"))).zero)},(i||(i=d("I64"))).zero);g({threadKey:j.threadKey,threadLastActivityTimeMs:j.lastActivityTimestampMs,threadLastMessageTimeMs:i.max(l.timestampMs,c),threadType:j.threadType})})())},[e,f,g,a])}g["default"]=a}),98);
__d("useThreadLastMessageTimeMs",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(b.table("messages")).getKeyRange(a).map(function(a){return a.timestampMs})},[b,a],f.id+":26")}g["default"]=a}),98);
__d("EmojiFormat.bs",[],(function(a,b,c,d,e,f){"use strict";function g(a){return a.split("_").map(function(a){return parseInt(a,16)})}function a(a){return a.map(function(a){return a.toString(16)}).join("_")}function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function b(a){return h(g(a))}f.codeStringToCodeArray=g;f.codeArrayToCodeString=a;f.codeArrayToUnicode=h;f.codeStringToUnicode=b}),66);
__d("LSEmojiSetsType",[],(function(a,b,c,d,e,f){a=Object.freeze({USER_GENERATED:0,RECENTLY_USED:1});f["default"]=a}),66);
__d("MWChatMessengerReactionsUtils",["EmojiFormat.bs","I64","LSEmojiSetsType","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=[{categoryIdx:(h||(h=d("I64"))).of_string("6"),emoji:"\u2764",emojiIdx:h.zero,sortKey:h.zero,type_:(i||(i=d("LSIntEnum"))).ofNumber(c("LSEmojiSetsType").USER_GENERATED)},{categoryIdx:h.zero,emoji:"\ud83d\ude06",emojiIdx:h.of_string("4"),sortKey:h.one,type_:i.ofNumber(c("LSEmojiSetsType").USER_GENERATED)},{categoryIdx:h.zero,emoji:"\ud83d\ude2e",emojiIdx:h.of_string("83"),sortKey:h.of_string("2"),type_:i.ofNumber(c("LSEmojiSetsType").USER_GENERATED)},{categoryIdx:h.zero,emoji:"\ud83d\ude22",emojiIdx:h.of_string("48"),sortKey:h.of_string("3"),type_:i.ofNumber(c("LSEmojiSetsType").USER_GENERATED)},{categoryIdx:h.zero,emoji:"\ud83d\ude20",emojiIdx:h.of_string("51"),sortKey:h.of_string("4"),type_:i.ofNumber(c("LSEmojiSetsType").USER_GENERATED)},{categoryIdx:h.zero,emoji:"\ud83d\udc4d",emojiIdx:h.of_string("130"),sortKey:h.of_string("5"),type_:i.ofNumber(c("LSEmojiSetsType").USER_GENERATED)},{categoryIdx:h.zero,emoji:"\ud83d\udc4e",emojiIdx:h.of_string("131"),sortKey:h.of_string("6"),type_:i.ofNumber(c("LSEmojiSetsType").USER_GENERATED)}];e=b.slice(0,6);var j=d("EmojiFormat.bs").codeArrayToUnicode([10084,65039]),k=d("EmojiFormat.bs").codeArrayToUnicode([10084]);function a(a){if(a===j)return!0;else return a===k}f=6;g.defaultStaticReactions=b;g.defaultCustomizableReactions=e;g.heartType1=j;g.heartType2=k;g.isHeart=a;g.cUSTOM_REACTIONS_NUM=f}),98);
__d("MWChatReactionEmoji",["cr:4707"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:4707")}),98);
__d("MWChatReactionsUtils",["MetaConfig","cr:3890"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("MetaConfig")._("58");return new Set(a.split(",").map(function(a){return{codepoints:[a.codePointAt(0)],id:a}}))}g.cUSTOM_REACTIONS_NUM=(d=b("cr:3890")).cUSTOM_REACTIONS_NUM;g.defaultStaticReactions=d.defaultStaticReactions;g.defaultCustomizableReactions=d.defaultCustomizableReactions;g.heartType1=d.heartType1;g.heartType2=d.heartType2;g.isHeart=d.isHeart;g.getHarmfulEmojisForBroadcastChannels=a}),98);
__d("isEventSupported",["fbjs/lib/ExecutionEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;c("fbjs/lib/ExecutionEnvironment").canUseDOM&&(h=document.implementation&&document.implementation.hasFeature("","")!==!0);function a(a,b){if(!c("fbjs/lib/ExecutionEnvironment").canUseDOM||b===!0&&!("addEventListener"in document))return!1;b="on"+a;var d=b in document;if(!d){var e=document.createElement("div");e.setAttribute(b,"return;");d=typeof e.getAttribute(b)==="function"}!d&&h&&a==="wheel"&&(d=document.implementation.hasFeature("Events.wheel","3.0"));return d}g["default"]=a}),98);
__d("MWChatConversationScroller.react",["BaseScrollableAreaContext","CometThrottle","ExecutionEnvironment","isEventSupported","react","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;e=b.forwardRef;var k=b.useCallback,l=b.useContext,m=b.useEffect,n=b.useImperativeHandle,o=b.useLayoutEffect,p=b.useMemo,q=b.useRef;function r(a,b){a=a!=null?a:20;if(b==null)return!1;else return b.scrollTop+b.clientHeight>=b.scrollHeight-a}function s(a,b){a=a!=null?a:20;if(b==null)return!1;else return b.scrollTop<=a}var t=(h||(h=c("ExecutionEnvironment"))).canUseDOM?document.body.style.overscrollBehavior==null&&((d=document.body)==null?void 0:d.style.scrollBoundaryBehavior)==null:!1;function a(a,b){var d=a.boundingClientRectRef,e=a.children,f=a.dispatch,g=a.hasMoreAfter,h=a.scrollPositionRef;a=a.onScroll;var i=a!=null?a:function(a){},u=q(f),v=q(null),w=k(function(a){v.current=a;if(d!=null){d.current=a!=null?a.getBoundingClientRect():void 0;return}},[d]);m(function(){u.current=f});var x=function(a,b){b=v.current;if(b!=null){b.scrollTop=a;return}},y=function(a){a===void 0&&(a=!1);var b=v.current;if(b!=null)return x(b.scrollHeight,a)},z=function(a,b){var c=v.current;if(c!=null)return x(c.scrollHeight-(a+c.clientHeight),b)},A=q(!1);A.current=g;var B=function(){var a=h.current,b=v.current;b=b!=null?b.scrollHeight-(b.scrollTop+b.clientHeight):void 0;var c=r(void 0,v.current),d=s(void 0,v.current);h.current=c?A.current?{type:"Island"}:{type:"Bottom"}:b!=null?d?{type:"Top",value:b}:{type:"Between",value:b}:{type:"Bottom"};c=h.current;d=0;var e=0;switch(a.type){case"Bottom":d=1;break;case"Top":case"Between":e=2;break;case"Island":break}if(e===2)switch(c.type){case"Top":d=1;break;case"Between":break;case"Bottom":case"Island":u.current("ScrollToBottom");break}if(d===1){e=0;switch(a.type){case"Top":break;case"Bottom":case"Between":e=2;break}e===2&&c.type==="Top"&&u.current("ScrollToTop")}return i(b)},C=function(a){if(t){var b=a.deltaY>0,c=a.deltaY<0;(b&&r(0,v.current)||c&&s(0,v.current))&&a.preventDefault()}return B()},D=function(a){var b=c("isEventSupported")("mousewheel")?"mousewheel":c("isEventSupported")("wheel")?"wheel":"DOMMouseScroll",d=function(b,c){a.addEventListener(b,c,{passive:!0});return function(){return a.removeEventListener(b,c,{passive:!0})}},e=function(){return a.addEventListener(b,C,{passive:!t})},f=function(){return a.removeEventListener(b,C,{passive:!t})},g=d("mouseenter",e),h=d("mouseleave",f);e=c("CometThrottle")(B,50,{trailing:!0});var i=d("scroll",e),j=d("mouseup",B),k=d("mousedown",B);return function(){f();i();g();h();k();return j()}};m(function(){var a=v.current;if(a==null)return;var b=D(a);return function(){return b()}},[]);o(function(){var a=v.current;!(a==null)&&a.clientHeight>0&&Math.abs(a.clientHeight-a.scrollHeight)<20&&u.current("ContentDoesNotFillContainer")});c("useLayoutEffect_SAFE_FOR_SSR")(function(){var a=h.current;switch(a.type){case"Bottom":y();break;case"Top":z(a.value,!1);break;case"Between":case"Island":break}});c("useLayoutEffect_SAFE_FOR_SSR")(function(){var a=h.current;switch(a.type){case"Bottom":y();break;case"Top":case"Between":z(a.value,!1);break;case"Island":break}},[]);var E=l(c("BaseScrollableAreaContext")),F=p(function(){return{getDOMNode:function(){return v.current}}},[]);a=p(function(){return E.concat([F])},[F,E]);n(b,function(){return{getScroller:function(){return w},isContainerFilled:function(){var a=v.current;if(a==null)return!0;else return!(a.clientHeight>0&&Math.abs(a.clientHeight-a.scrollHeight)<20)},scrollElementIntoViewIfNeeded:function(a){var b=v.current;if(b==null)return;var c=a.getBoundingClientRect();b=b.getBoundingClientRect();c=c.top;b=b.top;if(c<=b){a.scrollIntoView();return}},scrollToBottom:function(){h.current={type:"Bottom"};return y()},scrollToElement:function(a,b){var c=v.current;if(c==null)return;a.scrollIntoView();a=a.getBoundingClientRect();var d=c.getBoundingClientRect();a=a.top;d=d.top;if(a<=d){c.scrollBy(0,-b|0);return B()}},scrollToPosition:z}},[]);return j.jsx(c("BaseScrollableAreaContext").Provider,{children:j.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x1odjw0f xish69e x16qrkmw","data-release-focus-from":"CLICK",ref:w,tabIndex:-1,children:e}),value:a})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("MWV2MessageScroller.react",["LSIntEnum","LSMailboxMessagesRangeQueryDirection","MWChatConversationScroller.react","react","useMWMarkThreadAsReadWhenNewMessagesArrive"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useCallback;function a(a){var b=a.markThreadAsRead,e=a.children,f=a.fetchMore,g=a.hasMoreAfter,h=a.hasMoreBefore,l=a.scrollerRefs,m=a.thread;a=a.onScroll;a=a!=null?a:function(){};var n=k(function(){var a;return((a=l.scrollPositionRef.current)==null?void 0:a.type)==="Bottom"},[l]),o=k(function(){return!1}),p=c("useMWMarkThreadAsReadWhenNewMessagesArrive")(m,b,n,o);return j.jsx(c("MWChatConversationScroller.react"),{dispatch:function(a){switch(a){case"ContentDoesNotFillContainer":if(h)return f((i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE));else return;case"ScrollToBottom":if(g)return f((i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER));else return p();case"ScrollToTop":return f((i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE))}},hasMoreAfter:g,onScroll:a,ref:l.scrollerRef,scrollPositionRef:l.scrollPositionRef,children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRequestSharedTexts.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){return h._("__JHASH__U0QsQTXo_Q6__JHASH__",[h._param("FBFullName",a)])}function b(a){return h._("__JHASH__JiGe47KEv0o__JHASH__",[h._param("FBFullName",a)])}function c(a){return h._("__JHASH__Wrmwnynng2F__JHASH__",[h._param("name",a)])}function d(a){return h._("__JHASH__9ycmorSoeEo__JHASH__",[h._param("FBShortName",a)])}function e(){return h._("__JHASH__tRheqFvQPs3__JHASH__")}function f(){return h._("__JHASH__DXrX-aIvzqd__JHASH__")}g.getFBUserInfoTextMessage=a;g.getFBUserInfoTextMessageForMSplit=b;g.getDefaultInfoTextFooter=c;g.getDeclineUserDialogText=d;g.getMessageRequestHeaderInfoText=e;g.getMessageRequestHeaderTitleText=f}),98);
__d("MWContactDetails",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a!=null)return a.name}function b(a){if(a==null)return;var b=a.firstName;if(b!=null)return b;else return a.name}function c(a){if(a!=null)return a.secondaryName}f.getName=a;f.getShortName=b;f.getSecondaryName=c}),66);
__d("useMWChatLoadMoreItemsIncrementally",["I64","LSIntEnum","LSMailboxMessagesRangeQueryDirection","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useCallback,l=b.useMemo,m=b.useRef,n=b.useState,o={contents:void 0};function p(){var a;o.contents==null&&(o.contents=window.document.documentElement.style.overflowAnchor!=null);return(a=o.contents)!=null?a:!1}function a(a,b,e,f,g,h){a=a!=null?a:!1;var o=b!=null?b:!0;b=e!=null?e:{type:"Bottom"};e=a||!p();var q=f.length,r;switch(b.type){case"Top":case"Between":r=b.value>=200;break;case"Bottom":case"Island":r=!1;break}a=n(function(){if(r)return q;return o?window.screen.availHeight<1200?20:40:10});var s=a[0],t=a[1];b=l(function(){return f.slice(-s)},[f,s]);var u=m(s);a=k(function(a){if(!(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE)))throw c("unrecoverableViolation")("Message fetch direction must be 'before'","messenger_web_product");if(u.current+15<=q){u.current+=15;return t(function(){return u.current})}else{g((j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE));if(u.current<q+15){u.current=q+15;return t(function(){return u.current})}}},[g,q,t]);return e?[f,g,h]:[b,a,h||s<q]}g["default"]=a}),98);
__d("MWV2ChatImagePlaceholder.react",["CometObjectFitContainer.react","MDSGlimmer.react","MWPStableImage.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={glimmer:{display:"x1lliihq",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function a(a){var b=a.height;a=a.width;if(a==null)return null;if(b==null)return null;var e=a/b;return j.jsx(d("MWPStableImage.react").MWPStableImageContainer,{aspectRatio:e,className:(h||(h=c("stylex")))(!1),height:b,maxHeight:200,maxWidth:480,width:a,children:j.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:e,objectFitMode:"CONTAINER_WIDTH_BASED_ASPECT_RATIO",children:j.jsx(c("MDSGlimmer.react"),{index:1,xstyle:k.glimmer})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWAttachmentWithPreview",["I64","ReQL","ReQLSuspense","err","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useMemo;function a(a,b,e){var g=(h||(h=c("useReStore")))(),j=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(g.table("attachments")).getKeyRange(a,b)},[g,b,a,e],f.id+":39");e=k(function(){return j.sort(function(a,b){if(a.filesize==null)return b.filesize==null?0:-1;return b.filesize==null?a.filesize==null?0:1:(i||(i=d("I64"))).compare(a.filesize,b.filesize)}).reverse()},[j]);switch(e.length){case 0:return[];case 1:case 2:return e;default:c("recoverableViolation")("Message has more than 2 attachments","messenger_e2ee_web",{error:c("err")("[messenger_e2ee_web] Message has more than 2 attachments")});return[e[0],e[1]]}}g["default"]=a}),98);
__d("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatchStoredProcedure",["LSAnonymizedMsgrE2EEXmaReceiverFetchDispatch"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.pk;d[1]=b.contentRef;return c("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatch").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("constructAttachmentFromXmaDataclass",["fbt","I64","LSIntEnum","MNXMAPreviewImageDecorationType"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=h._("__JHASH__rtAku5xCKsP__JHASH__"),l=function(a){switch(a){case"XMA_OPEN_NATIVE":return"xma_open_native";case"XMA_WEB_URL":return"xma_web_url";default:return"fallback"}},m=function(a){var b;if(a==null)return{};var c=a==null?void 0:a.image;return{headerImageUrl:(b=c==null?void 0:c.url)!=null?b:void 0,headerImageUrlExpirationTimestampMs:(c==null?void 0:c.expiration_timestamp_ms)!=null?(i||(i=d("I64"))).of_string(c==null?void 0:c.expiration_timestamp_ms):void 0,headerImageUrlFallback:(b=c==null?void 0:c.url_fallback)!=null?b:void 0,headerImageUrlMimeType:(b=c==null?void 0:c.mime_type)!=null?b:void 0,headerSubtitleText:(c=a==null?void 0:a.subtitle)!=null?c:void 0,headerTitle:(b=a==null?void 0:a.title)!=null?b:void 0}},n=function(a){if(a==null)return;switch(a){case"COLLAGE":case"INSTAGRAM_ICON":case"LIVE":case"MESSENGER_ICON":case"VIDEO":case"YOUTUBE_SHORTS":case"YOUTUBE_VIDEO":return(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType")[a]);default:return(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DEFAULT)}},o=function(a){var b;if(a==null)return{};var c=a==null?void 0:a.preview;return{maxSubtitleNumOfLines:(a==null?void 0:a.max_subtitle_num_lines)!=null?(i||(i=d("I64"))).of_int32(a==null?void 0:a.max_subtitle_num_lines):void 0,maxTitleNumOfLines:(a==null?void 0:a.max_title_num_lines)!=null?(i||(i=d("I64"))).of_int32(a==null?void 0:a.max_title_num_lines):void 0,previewHeight:(c==null?void 0:c.height)!=null?(i||(i=d("I64"))).of_int32(c==null?void 0:c.height):void 0,previewImageDecorationType:n(c==null?void 0:c.image_decoration_type),previewUrl:(b=c==null?void 0:(b=c.media)==null?void 0:b.url)!=null?b:void 0,previewUrlExpirationTimestampMs:(c==null?void 0:(b=c.media)==null?void 0:b.expiration_timestamp_ms)!=null?(i||(i=d("I64"))).of_string(c==null?void 0:(b=c.media)==null?void 0:b.expiration_timestamp_ms):void 0,previewUrlFallback:(b=c==null?void 0:(b=c.media)==null?void 0:b.url_fallback)!=null?b:void 0,previewUrlMimeType:(b=c==null?void 0:(b=c.media)==null?void 0:b.mime_type)!=null?b:void 0,previewWidth:(c==null?void 0:c.width)!=null?(i||(i=d("I64"))).of_int32(c==null?void 0:c.width):void 0,subtitleText:(b=a==null?void 0:a.subtitle)!=null?b:void 0,titleText:(c=a==null?void 0:a.title)!=null?c:void 0}},p=function(a,b,c){var e=["default_cta","cta_1","cta_2","cta_3"].reduce(function(e,f,g){if(a[f]!=null){var h;g=babelHelpers["extends"]({},c,{actionUrl:(h=(h=(h=a[f])==null?void 0:h.action_url)!=null?h:(h=a[f])==null?void 0:h.native_url)!=null?h:void 0,attachmentIndex:(i||(i=d("I64"))).zero,ctaId:i.add(b,i.of_int32(g+1)),nativeUrl:(g=(g=(h=a[f])==null?void 0:h.native_url)!=null?g:(h=a[f])==null?void 0:h.action_url)!=null?g:void 0,title:(g=(h=a[f])==null?void 0:h.title)!=null?g:k.toString(),type_:l((h=a[f])==null?void 0:h.cta_type)});e[f]=g}return e},{cta_1:void 0,cta_2:void 0,cta_3:void 0,default_cta:void 0});return e},q=function(a){return a==null?{}:{defaultCtaId:a==null?void 0:a.ctaId,defaultCtaTitle:a==null?void 0:a.title,defaultCtaType:a==null?void 0:a.type_}},r=function(a,b){var c;return a==null?{}:(c={},c["attachmentCta"+b+"Id"]=a==null?void 0:a.ctaId,c["cta"+b+"Title"]=a==null?void 0:a.title,c["cta"+b+"Type"]=a==null?void 0:a.type_,c)};a=function(a,b,c){if((a==null?void 0:a.content)==null)return null;a=a.content;if(a.__typename==="XMSGXmaSingleContent"){var d=p(a,b,c);b=babelHelpers["extends"]({},q(d==null?void 0:d.default_cta),r(d==null?void 0:d.cta_1,1),r(d==null?void 0:d.cta_2,2),r(d==null?void 0:d.cta_3,3),m(a.header),o(a.body));c=Object.keys(d).filter(function(a){return d[a]!=null}).map(function(a){return d[a]});return[b,c]}return null};b=a;g["default"]=b}),98);
__d("useReceiverFetchXMA",["FBLogger","I64","LSAnonymizedMsgrE2EEXmaReceiverFetchDispatchStoredProcedure","LSFactory","MAWReceiverFetchQPLLogger","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","constructAttachmentFromXmaDataclass","gkx","promiseDone","react","useJSON","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(j||d("react")).useEffect,m=c("gkx")("2992"),n=new Map();function o(a){try{a=JSON.parse(a);return JSON.stringify(a.fetch_params)}catch(a){c("FBLogger")("messenger_e2ee_web").mustfix("Error retrieving fetch_params from the contentRef");return""}}function p(a,b){if((a==null?void 0:a.contentRef)!=null){var e={contentRef:o(a==null?void 0:a.contentRef),pk:a.pk};d("MAWReceiverFetchQPLLogger").logFetchStart((k||(k=d("I64"))).to_string(a.pk));c("promiseDone")(b.runInTransaction(function(a){return c("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatchStoredProcedure")(c("LSFactory")(a),e)},"readwrite"))}}function q(a,e,f,g){c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var h=(yield (i||(i=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.table("attachments")).getKeyRange(f.threadKey,f.messageId)),d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.table("attachment_ctas")))])),j=h[0];h=h[1];h=h!=null?(k||(k=d("I64"))).add(h.ctaId,(k||(k=d("I64"))).one):(k||(k=d("I64"))).one;if((j==null?void 0:j.attachmentFbid)!=null){h=(h=c("constructAttachmentFromXmaDataclass")(g,h,{attachmentFbid:j==null?void 0:j.attachmentFbid,attachmentIndex:(k||(k=d("I64"))).zero,messageId:f.messageId,threadKey:f.threadKey}))!=null?h:[];var l=h[0];h=h[1];h=(h=h==null?void 0:h.map(function(b){if(b!=null)return a.table("attachment_ctas").add(b)}).filter(Boolean))!=null?h:[];yield (i||(i=b("Promise"))).all(h);yield a.table("attachments").put(babelHelpers["extends"]({},j,l,{xmaContentType:void 0}));d("MAWReceiverFetchQPLLogger").logFetchSuccess(e);n["delete"](e)}});return function(b){return a.apply(this,arguments)}}(),"readwrite"))}function a(a,b){var e,g=(h||(h=c("useReStore")))(),i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.table("client_xmas")).getKeyRange((k||(k=d("I64"))).of_string(a))},[a,g],f.id+":129");l(function(){if(!m)return;if((i==null?void 0:i.xmaDataclass)==null&&!n.has(a)){n.set(a,"PENDING");try{p(i,g)}catch(b){d("MAWReceiverFetchQPLLogger").logFetchFailure(a,b.message),c("FBLogger")("maw_receiver_fetch").mustfix("Error parsing content ref")}}},[g,a,i]);var j=c("useJSON")((e=i==null?void 0:i.xmaDataclass)!=null?e:"{}");l(function(){(j==null?void 0:j.content)!=null&&n.get(a)==="PENDING"&&m&&(d("MAWReceiverFetchQPLLogger").logLoadCompleted(a),q(g,a,b,j))},[j,a,g,b])}g["default"]=a}),98);
__d("MAWSecureAttachment.react",["CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","MAWAttachmentBlob.react","MAWChatFile.react","MAWGetAttachmentThumbnailBlob","MWAudioPlayer.react","MWPMessageIsReply","MWPMessageListAttachmentContainer.react","MWV2ChatImage.react","MWV2ChatImagePlaceholder.react","MWV2ChatVideo.react","MWV2Sticker.react","MWXMAAttachment.react","MWXSolidMessageBubble.react","MessagingAttachmentType","react","useMWAttachmentWithPreview","useReceiverFetchXMA"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function l(a){var b=a.dbAttachment,e=a.connectBottom,f=a.connectTop,g=a.message;a=a.outgoing;var h=b.attachmentFbid,l=b.attachmentType,m=b.authorityLevel;switch(!0){case h===(i||(i=d("I64"))).to_string((i||(i=d("I64"))).max_int)&&(i||(i=d("I64"))).equal(m,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)):return k.jsx(c("MWV2ChatImagePlaceholder.react"),{height:b.previewHeight!=null?(i||(i=d("I64"))).to_float(b.previewHeight):b.previewHeightLarge!=null?(i||(i=d("I64"))).to_float(b.previewHeightLarge):void 0,width:b.previewWidth!=null?(i||(i=d("I64"))).to_float(b.previewWidth):b.previewWidthLarge!=null?(i||(i=d("I64"))).to_float(b.previewWidthLarge):void 0});case(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):return k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("MWV2ChatImagePlaceholder.react"),{height:b.previewHeight!=null?(i||(i=d("I64"))).to_float(b.previewHeight):b.previewHeightLarge!=null?(i||(i=d("I64"))).to_float(b.previewHeightLarge):void 0,width:b.previewWidth!=null?(i||(i=d("I64"))).to_float(b.previewWidth):b.previewWidthLarge!=null?(i||(i=d("I64"))).to_float(b.previewWidthLarge):void 0}),children:k.jsx(c("MWV2ChatImage.react"),{attachment:b,connectTop:f,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:c("MAWGetAttachmentThumbnailBlob"),message:g,navigateToRouteForMediaViewer:!1,outgoing:a})});case(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):return k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("MWV2ChatImagePlaceholder.react"),{height:b.previewHeight!=null?(i||(i=d("I64"))).to_float(b.previewHeight):b.previewHeightLarge!=null?(i||(i=d("I64"))).to_float(b.previewHeightLarge):void 0,width:b.previewWidth!=null?(i||(i=d("I64"))).to_float(b.previewWidth):b.previewWidthLarge!=null?(i||(i=d("I64"))).to_float(b.previewWidthLarge):void 0}),children:k.jsx(c("MWV2ChatVideo.react"),{attachment:b,connectTop:f,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,message:g,navigateToRouteForMediaViewer:!1,outgoing:a})});case(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)):return k.jsx(d("MWAudioPlayer.react").MWAudioPlayer,{attachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,isReply:c("MWPMessageIsReply")(g),outgoing:a});case(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)):return k.jsx(c("CometPlaceholder.react"),{fallback:k.jsx(c("MWV2ChatImagePlaceholder.react"),{height:b.previewHeight!=null?(i||(i=d("I64"))).to_float(b.previewHeight):b.previewHeightLarge!=null?(i||(i=d("I64"))).to_float(b.previewHeightLarge):void 0,width:b.previewWidth!=null?(i||(i=d("I64"))).to_float(b.previewWidth):b.previewWidthLarge!=null?(i||(i=d("I64"))).to_float(b.previewWidthLarge):void 0}),children:k.jsx(c("MWV2ChatImage.react"),{attachment:b,connectTop:f,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,message:g,navigateToRouteForMediaViewer:!1,outgoing:a})});case(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)):return k.jsx(c("MWV2Sticker.react"),{attachment:b,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob});case(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)):return k.jsx(d("MWXMAAttachment.react").MWXMAAttachment,{attachment:b,connectBottom:e,connectTop:f,getFaviconUrlXMA:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"favicon")},getHeaderUrlXMA:function(a){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"header")},getPlayableUrl:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview")},getPreviewUrlXMA:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview")},outgoing:a});case(i||(i=d("I64"))).equal(l,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)):return k.jsx(c("MWXSolidMessageBubble.react"),{connectBottom:e,connectTop:f,outgoing:a,style:{backgroundColor:"var(--chat-incoming-message-bubble-background-color)",padding:0},children:k.jsx(c("MAWChatFile.react"),{file:b})});default:return"Unsupported attachment type"}}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.connectBottom,e=a.connectTop,f=a.message;a=a.outgoing;var g=f.authorityLevel,h=f.messageId,m=f.threadKey;m=c("useMWAttachmentWithPreview")(m,h,g);h=m[0];c("useReceiverFetchXMA")((g=h==null?void 0:h.attachmentFbid)!=null?g:"",f);return h==null?null:k.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:e,message:f,paint:(i||(i=d("I64"))).equal(h.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))?!1:void 0,children:k.jsx(l,{connectBottom:b,connectTop:e,dbAttachment:h,message:f,outgoing:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWEncryptionPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__C8O2a78lb6C__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWFutureproofPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__4rmC_sX93Dk__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWUnavailablePlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__M9fzIhDqITQ__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWUnavailableStoryPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__pGZ-I0iz-G0__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecurePlaceholder.react",["CometPlaceholder.react","I64","LSIntEnum","MAWEncryptionPlaceholder.react","MAWFutureproofPlaceholder.react","MAWUnavailablePlaceholder.react","MAWUnavailableStoryPlaceholder.react","MWPMessageListColumn.react","ReQL","ReQLSuspense","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||d("react");function m(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.table("attachments")).getKeyRange(a.threadKey,a.messageId)},[b,a.threadKey,a.messageId],f.id+":30")}function n(a){a=a.message;a=a;a=m(a);if(a==null)return null;a=a.defaultCtaType;if(a==="xma_montage_share")return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWUnavailableStoryPlaceholder.react"),{})});c("recoverableViolation")("Unexpected case where message is tombstone type but the attachment is not xma montage share","messenger_e2ee_web");return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWUnavailablePlaceholder.react"),{})})}n.displayName=n.name+" [from "+f.id+"]";function a(a){a=a.message;var b=a.displayedContentTypes,e=null;(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(65536))?e=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWEncryptionPlaceholder.react"),{})}):(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(131072))?e=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWFutureproofPlaceholder.react"),{})}):(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(262144))?e=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWUnavailablePlaceholder.react"),{})}):(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(256))&&(e=l.jsx(n,{message:a}));return l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureAttachmentRenderer.react",["CometPlaceholder.react","MAWMsg","MAWSecureAttachment.react","MAWSecurePlaceholder.react","MWPMessageParsingUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b,e,f){b=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectTop(a,b,"below");e=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectBottom(a,e,"below");return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:d("MAWMsg").isMediaMsg(a)||d("MAWMsg").isXMAMsg(a)?i.jsx(c("MAWSecureAttachment.react"),{connectBottom:e,connectTop:b,message:a,outgoing:f}):i.jsx(c("MAWSecurePlaceholder.react"),{message:a})})}a.displayName=a.name+" [from "+f.id+"]";g.render=a}),98);
__d("MAWMessageListRow.react",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MWMessageRow.react","MWPVisibleMessageContext.react","MWV2MessageActionsVisibility.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.domElementRef,c=a.lastEbMessageTime,e=a.modal,f=a.renderAttachment,g=a.row,h=a.thread;a=d("MWV2MessageActionsVisibility.react").useStopHoveringRef();var k=d("LSMessagingThreadTypeUtil").isSecure(h.threadType),l=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();l=l.visibleMessage;var m=g.message;k=k?(i||(i=d("I64"))).equal(h.threadKey,m.threadKey):!1;var n=!1;if(l!=null){var o=l.messageId;switch(l.source){case"Reply":case"Pinned":n=o===m.messageId;break;default:n=!1}}l={domElementRef:b,hasMessageEmphasisRing:n,isModal:e===m.messageId,isSecureMessage:k,lastEbMessageTime:c,message:m,nextMessage:g.nextMessage,prevMessage:g.prevMessage,renderAttachment:f,stopHoveringRef:a,threadType:d("Int64Hooks").useMemoInt64(function(){return h.threadType},[h.threadType])};return j.jsx(d("MWMessageRow.react").MWMessageRow,babelHelpers["extends"]({},l))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMessageList_DEPRECATED.react",["BaseTheme.react","CometErrorBoundary.react","CometPagelet.react","CometScreenReaderText.react","I64","Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWMessageListRow.react","MAWStateContext.react","MWBaseTheme","MWMessageRow.react","MWPBaseMessageList_DEPRECATED","MWPMessageListColumn.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWV2MessageRowSimple.react","ReQL","ReQLSuspense","cr:3907","cr:6046","cr:844","qex","react","useMWPAriaLabelForMessageListGrid","useReStore","useThreadLastMessageTimeMs","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i,m=l.useEffect,n=l.useId,o=l.useState;function p(a,b){return new Map(d("ReQLSuspense").useArray(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.table("participants")).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.table("contacts"))).map(function(a){var b=a[0];a=a[1];return[(j||(j=d("I64"))).to_string(a.id),[b,a]]})},[b,a.threadKey],f.id+":83"))}function q(a,b){m(function(){var c;if((a==null?void 0:(c=a.scrollPositionRef.current)==null?void 0:c.type)==="Bottom"&&b.length>0){c=a.scrollerRef.current;c==null?void 0:c.scrollToBottom()}},[b,a])}function a(a){var b=a.scrollerRefs,e=a.theme;e=e===void 0?d("MWBaseTheme").empty:e;var f=a.threadKey;a=a.threadType;var g=d("MWPTypingIndicators.react").useTypingParticipants(f),h=d("MWPTypingIndicators.react").useAccessibilityText(g);q(b,g);if(g.length>0)return k.jsx(c("BaseTheme.react"),{config:e,children:k.jsx(c("MWV2MessageRowSimple.react"),{children:k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:[k.jsx("div",{"aria-live":"polite",children:k.jsx(c("CometScreenReaderText.react"),{text:h})}),k.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{threadKey:f,threadType:a})]})})});else return null}a.displayName=a.name+" [from "+f.id+"]";var r=d("withCometPlaceholder").withCometPlaceholder(a);function e(a){var e=a.messageElementRefs,g=a.messages,i=a.renderAttachment,l=a.scrollerRefs,m=a.thread,q=(h||(h=c("useReStore")))();a=p(m,q);var s=c("useMWPAriaLabelForMessageListGrid")(m),t=d("MWMessageRow.react").useTheme(),u=o(""),v=u[0],w=u[1],x=n(),y=d("Int64Hooks").useMemoInt64(function(){return m.threadType},[m.threadType]),z=c("useThreadLastMessageTimeMs")(m.threadKey);u=(u=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(q.table("threads"),["lastActivityTimestampMs"]).getKeyRange(m.threadKey).map(function(a){a=a.lastActivityTimestampMs;return z!=null?(j||(j=d("I64"))).lt(z,a):!0})},[q,z,m.threadKey],f.id+":180"))!=null?u:!1;var A=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector()),B=b("cr:844")==null?void 0:b("cr:844")(m.threadKey);u=!A&&u&&!((A=c("qex")._("97"))!=null?A:!1);return k.jsxs(k.Fragment,{children:[k.jsx(c("MWPBaseMessageList_DEPRECATED"),{messages:g,participants:a,renderRow:function(a){var b=a.message,d=a.nextMessage;a=a.prevMessage;return k.jsx(c("MAWMessageListRow.react"),{domElementRef:e.set(b.messageId),lastEbMessageTime:B,modal:v,renderAttachment:i,row:{message:b,nextMessage:d,prevMessage:a},thread:m})},thread:m,children:function(a){a=k.jsxs(k.Fragment,{children:[a,k.jsx(r,{scrollerRefs:l,theme:t,threadKey:m.threadKey,threadType:y})]});return k.jsx("div",{"data-testid":void 0,id:x,children:k.jsx(d("CometPagelet.react").Placeholder,{fallback:null,name:"MWV2MessageList",children:k.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:m,children:k.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:s,modal:v,setModal:w,children:b("cr:3907")==null?a:k.jsx(b("cr:3907"),{id:x,children:a})})})})})}}),u&&b("cr:6046")?k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx(b("cr:6046"),{})}):null]})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("LSInitiateThreadMigration",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[3]!==void 0?(d[0]=new c.Map(),d[0].set("open_message_thread_key",a[0]),d[0].set("armadillo_thread_key",a[1]),d[0].set("trace_id",a[3]),d[0].set("should_copy_messages",a[2]),d[1]=d[0].get("open_message_thread_key"),d[0],d[2]=d[0].get("armadillo_thread_key"),d[0],d[3]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),[c.i64.to_string(d[1]),"_",c.i64.to_string(d[2])].join(""),c.i64.cast([0,436]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(d[0]=new c.Map(),d[0].set("open_message_thread_key",a[0]),d[0].set("armadillo_thread_key",a[1]),d[0].set("should_copy_messages",a[2]),d[1]=d[0].get("open_message_thread_key"),d[0],d[2]=d[0].get("armadillo_thread_key"),d[0],d[3]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),[c.i64.to_string(d[1]),"_",c.i64.to_string(d[2])].join(""),c.i64.cast([0,436]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0])))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSInitiateThreadMigrationStoredProcedure",["LSInitiateThreadMigration"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.openMessageThreadKey;d[1]=b.armadilloThreadKey;d[2]=b.shouldCopyMessages;d[3]=b.traceId;return c("LSInitiateThreadMigration").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("XMessengerHelpCenterContentControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/help/messenger-app/{cms_id}/{?cms_title}/",Object.freeze({region_hint:[],expand_folders:[]}),void 0);b=a;g["default"]=b}),98);
__d("useSecureThreadDetailGetDevices",["I64","MAWJids","MAWJobDefinitions","MAWTimedJob","ReQL","ReQLSuspense","WAJobOrchestratorTypes","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useRef;function a(a,b){var e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("participants"),["contactId"]).getKeyRange(a.threadKey).filter(function(b){return!(i||(i=d("I64"))).equal(b.contactId,a.threadKey)}).map(function(a){return d("MAWJids").toUserJid((i||(i=d("I64"))).to_string(a.contactId))})},[b,a.threadKey],f.id+":30"),g=k(new Set());j(function(){var a=g.current.size!==e.length||!e.every(function(a){return g.current.has(a)});if(!a&&e.length>2)return;a=new Set(e);g.current=a;c("promiseDone")(d("MAWTimedJob").TimedUIJobStarters.fireAndForget(d("MAWJobDefinitions").createStartJobInfo("getDevices",{ignoreDhash:!1,reason:"details-participants-changed",scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW},users:a})))},[e])}g["default"]=a}),98);
__d("MAWSecureThreadDetail_DEPRECATED.react",["CometHeroHoldTrigger.react","CometPagelet.react","CometPlaceholder.react","ComponentMountUnmountSubspanLogger.react","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWArmadilloLinkContext.react","MAWFetchMoreMessages","MAWMessageList_DEPRECATED.react","MAWSecureAttachmentRenderer.react","MWContextBanner.react","MWInboxThreadMessagesSpinner.react","MWPMessageListColumn.react","MWV2MessageScroller.react","ReQL","ReQLSuspense","cr:5983","emptyFunction","logMessengerWebFalcoEvent","react","useMAWMarkThreadAsRead","useMWChatLoadMoreItemsIncrementally","useMWCurrentVisibleMessage","useMWV2ConversationScrollerRefs","useReStore","useSecureThreadDetailGetDevices"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));e=i;var m=e.useCallback,n=e.useImperativeHandle,o=e.useMemo,p=e.useState,q=3;function r(a,b){var c=(k||(k=d("I64"))).compare(a.primarySortKey,b.primarySortKey);if(c!==0)return c;c=k.compare((c=a.secondarySortKey)!=null?c:(k||(k=d("I64"))).zero,(c=b.secondarySortKey)!=null?c:(k||(k=d("I64"))).zero);return c!==0?c:k.compare(a.timestampMs,b.timestampMs)}function s(a,b){var e=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){var f=d("ReQL").fromTableAscending(e.table("messages").index("messageDisplayOrder")).getKeyRange(b.threadKey);if(a!=null)return f.bounds({gte:d("ReQL").key(a.minTimestampMs),lte:d("ReQL").key(a.maxTimestampMs)});else if((k||(k=d("I64"))).lt(b.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))||d("LSMessagingThreadTypeUtil").isSecure(b.threadType))return f;return d("ReQL").empty()},[e,a,b.authorityLevel,b.threadKey,b.threadType],f.id+":92")}function t(a,b){var e=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){if(b==null)return d("ReQL").empty();var f=d("ReQL").fromTableAscending(e.table("messages")).getKeyRange(b.threadKey);if(a!=null)return d("ReQL").fromTableAscending(e.table("messages")).getKeyRange(b.threadKey).bounds({gte:d("ReQL").key(a.minTimestampMs),lte:d("ReQL").key(a.maxTimestampMs)});else if((k||(k=d("I64"))).lt(b.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))||d("LSMessagingThreadTypeUtil").isSecure(b.threadType))return f;return d("ReQL").empty()},[e,b,a],f.id+":126")}function u(a,b){var c=(k||(k=d("I64"))).compare(a.primarySortKey,b.primarySortKey);if(c!==0)return c;c=a.secondarySortKey;var e=b.secondarySortKey;if(c==null)if(e!=null)return-1;else return(k||(k=d("I64"))).compare(a.timestampMs,b.timestampMs);if(e==null)return 1;c=k.compare(c,e);return c!==0?c:k.compare(a.timestampMs,b.timestampMs)}function v(a,b,e,f,g){var h=s(a,e),i=t(b,f);d("Int64Hooks").useEffectInt64(function(){if(f!=null&&i.length===0){var a=f.threadKey,b=f.threadType;c("logMessengerWebFalcoEvent")({threadKey:a,threadType:b},"no_open_messages_in_cutover_thread",g,{cutoverThreadKey:(k||(k=d("I64"))).to_string(e.threadKey),reason:"no_messages_fetched_for_open"})}},[g,i.length,f,e.threadKey]);return o(function(){if(a!=null&&!a.hasMoreBefore)return i.sort(u).concat(h.sort(r));else return h.sort(r)},[a,h,i])}function a(a){var e,f=a.cutoverOpenThread,g=a.entryPoint,i=a.messageListRef;a=a.thread;var j=c("useMWV2ConversationScrollerRefs")(),k=(h||(h=c("useReStore")))(),o=m(function(){var a;return((a=j.scrollPositionRef.current)==null?void 0:a.value)===void 0&&((a=j.scrollPositionRef.current)==null?void 0:a.type)==="Bottom"},[j]),r=c("MAWFetchMoreMessages").useFetchCutoverMessages(a.threadKey,f==null?void 0:f.threadKey,a.threadType),s=c("useMWCurrentVisibleMessage")(a,j.scrollerRef),t=s.messageRange,u=c("useMWCurrentVisibleMessage")(f,j.scrollerRef);u=u.messageRange;e=(e=t==null?void 0:t.hasMoreAfter)!=null?e:!1;var w=p(!1),x=w[0],y=w[1];r=c("useMWChatLoadMoreItemsIncrementally")(e,void 0,void 0,v(t,u,a,f,g),r,(w=t==null?void 0:t.hasMoreBefore)!=null?w:!1);w=r[0];var z=r[1];r=r[2];c("useSecureThreadDetailGetDevices")(a,k);n(i,function(){return{getScrollAreaElement:c("emptyFunction"),jumpToMostRecentMessage:c("emptyFunction"),restoreScrollPosition:function(){var a=j.scrollerRef.current,b=j.scrollPositionRef.current;if(a!=null&&b!=null)switch(b.type){case"Bottom":a.scrollToBottom();break;case"Top":case"Between":a.scrollToPosition(b.value,!1);break;case"Island":break}}}},[j.scrollPositionRef,j.scrollerRef]);k=t==null||t.isLoadingBefore;i=f!=null&&(u==null||u.isLoadingBefore);t=w.length>=q;return l.jsxs(l.Fragment,{children:[l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWCutoverEncryptedBackupsBanner",children:b("cr:5983")!=null&&f&&l.jsxs(l.Fragment,{children:[l.jsx(b("cr:5983"),{isShown:x}),l.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWCutoverLoadingMessages",hold:i&&!t})]})}),l.jsxs(d("MAWArmadilloLinkContext.react").MAWArmadilloLinkProvider,{children:[l.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MAWSecureThreadDetail"}),l.jsxs(c("MWV2MessageScroller.react"),{fetchMore:z,hasMoreAfter:e,hasMoreBefore:r,lastMessageToCalculateIfThreadIsRead:w.length!==0?w[w.length-1]:void 0,markThreadAsRead:c("useMAWMarkThreadAsRead")(a,g),onScroll:function(){y(!o())},scrollerRefs:j,thread:a,children:[l.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:20}),l.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWLoadingMessages",hold:k&&!t}),r?l.jsx(c("MWInboxThreadMessagesSpinner.react"),{}):l.jsx(c("MWContextBanner.react"),{threadKey:a.threadKey,threadType:a.threadType}),l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:10})]}),l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:null}),l.jsx(d("CometPagelet.react").Placeholder,{fallback:null,name:"MAWMessageList",children:l.jsx(c("MAWMessageList_DEPRECATED.react"),{messageElementRefs:s.messageElementRefs.current,messages:w,renderAttachment:d("MAWSecureAttachmentRenderer.react").render,scrollerRefs:j,thread:a})}),e?l.jsx(c("MWInboxThreadMessagesSpinner.react"),{}):null]})]})]})}a.displayName=a.name+" [from "+f.id+"]";e=l.memo(a);g.messageSortOrder=r;g.useMessagesUnsorted=s;g.useMessagesWithMaybeCutover=v;g.MAWSecureThreadDetail_DEPRECATED=e}),98);
__d("updateEphemeralDuration",["JSResourceForInteraction","MAWBridgeSendAndReceive","Promise","WATimeUtils","gkx","qex"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f,g,i){var j=d("WATimeUtils").millisTime();if(c("gkx")("9025")||c("qex")._("93")===!0)return c("JSResourceForInteraction")("MAWEphemeralSettingsUpdate").__setRef("updateEphemeralDuration").load().then(function(a){return a.updateEphemeralSettings(e,j,i)}).then(function(a){f();return!0});else if(a!=null)return d("MAWBridgeSendAndReceive").sendAndReceive("backend","setEphemeralSettingsFromFrontend",{ephemeralExpirationInSec:e,ephemeralLastUpdatedOrSetTimestamp:d("WATimeUtils").castMilliSecondsToUnixTime(j),threadId:a}).then(function(a){a.success?f():g();return a.success});g();return(h||(h=b("Promise"))).resolve(!1)}g["default"]=a}),98);
__d("useMAWMaybeResetEphemeralSettings",["Int64Hooks","MAWEphemeralGatingUtil","MAWGetEphemeralSettings","MAWMiActOnActThreadReady","Promise","WALoggerDeferred","promiseDone","react","updateEphemeralDuration","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[reset ephemeral settings]: fail to reset settings for chatJid ",", previous settings was ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[reset ephemeral settings]: success to reset settings for chatJid ",", previous settings was ",""]);k=function(){return a};return a}var l=(i||d("react")).useRef,m=0;function a(a){var b=c("useAsyncReStore")(),e=l(null);d("Int64Hooks").useEffectInt64(function(){(e.current==null||e.current!==a)&&(e.current=a,d("MAWEphemeralGatingUtil").isResetEphemeralSettingsEnabled()&&c("promiseDone")(b,function(b){return c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(b,a,"useMAWResetEphemeralSettings",function(b,c,d){return n(a,d)}))}))},[a,b])}function n(a,e){var f=d("MAWEphemeralGatingUtil").getExpirationOptions();return e!=null?d("MAWGetEphemeralSettings").getEphemeralSetting(e,a).then(function(b){b&&b.ephemeralExpirationInSec>0&&!f.includes(b.ephemeralExpirationInSec)&&c("promiseDone")(c("updateEphemeralDuration")(e,m,function(){void d("WALoggerDeferred").LOG(k(),e,b.ephemeralExpirationInSec)},function(){void d("WALoggerDeferred").LOG(j(),e,b.ephemeralExpirationInSec)},a))}):(h||(h=b("Promise"))).resolve()}g["default"]=a}),98);
__d("MAWSecureThreadDetailWrapper.react",["CometErrorBoundary.react","CometHeroHoldTrigger.react","FBLogger","I64","Int64Hooks","LSAuthorityLevel","LSFactory","LSInitiateThreadMigrationStoredProcedure","LSIntEnum","MAWSecureThreadDetail_DEPRECATED.react","MAWThreadCutover","MWFailChatTabOpenQPLEvent","QPLUserFlow","WAHex","cr:1957","cr:3200","cr:4646","emptyFunction","logMessengerWebFalcoEvent","qpl","react","useAsyncReStore","useMAWMaybeResetEphemeralSettings"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.useCallback,m=e.useEffect,n=e.useRef,o=e.useState,p=(e=b("cr:3200"))!=null?e:c("emptyFunction"),q=(e=b("cr:4646"))!=null?e:c("emptyFunction");function r(a,b){var e=(i||(i=d("I64"))).to_int32(a);d("Int64Hooks").useEffectInt64(function(){c("QPLUserFlow").start(c("qpl")._(25306607,"1883"),{annotations:{string:{entryPoint:b,thread_id:(i||(i=d("I64"))).to_string(a)}},instanceKey:e})},[b,e,a]);var f=l(function(a){c("QPLUserFlow").addPoint(c("qpl")._(25306607,"1883"),a,{instanceKey:e})},[e]),g=l(function(a){c("QPLUserFlow").endSuccess(c("qpl")._(25306607,"1883"),{annotations:{string:{isCutover:String(a)}},instanceKey:e})},[e]),h=l(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(25306607,"1883"),{string:a},{instanceKey:e})},[e]),j=l(function(a,b){c("QPLUserFlow").endFailure(c("qpl")._(25306607,"1883"),a,{annotations:{string:{isCutover:String(b)}},instanceKey:e})},[e]);return{addQplAnnotations:h,addQplPoint:f,qplEndFailure:j,qplEndSuccess:g}}function s(a,b){if(a==null)return"not_cutover_thread";return b!=null?a.showOpenMessageHistory===!1?"dual_thread_cutover":"show":"loading"}function a(a){var e=a.entryPoint,f=a.messageListRef,g=a.thread;a=r(g.threadKey,e);var h=a.addQplAnnotations,u=a.addQplPoint,v=a.qplEndFailure,w=a.qplEndSuccess;c("useMAWMaybeResetEphemeralSettings")(g.threadKey);p(g.threadKey);var x=n(""),y=l(function(a){switch(a){case"loading":return;case"show":h({showOpenHistory:"show"});w(!0);return;case"hide":h({showOpenHistory:"hide"});w(!0);return;case"not_cutover_thread":w(!1);return;case"dual_thread_cutover":w(!1);return;case"error":v(x.current,!0);return;default:a;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable showOpenMsgHistoryState: %s",a)}},[h,v,w]),z=c("useAsyncReStore")(),A=l(function(a,b){return z.then(function(e){return e.runInTransaction(function(e){return c("LSInitiateThreadMigrationStoredProcedure")(c("LSFactory")(e),{armadilloThreadKey:b,openMessageThreadKey:a,shouldCopyMessages:!1,traceId:d("WAHex").randomHex(8)})},"readwrite")})},[z]),B=d("MAWThreadCutover").useGetCutoverMapping(g.threadKey),C=d("MAWThreadCutover").useCutoverOpenThread(g.threadKey);q(g.threadKey);a=o(s(B,C));var D=a[0],E=a[1];d("Int64Hooks").useEffectInt64(function(){y(D);if(D==="show"||D==="hide")return;if(B==null)return;if(C!=null&&B.showOpenMessageHistory!==!1)return E("show")},[B,C,y,D]);m(function(){B!=null&&(u("thread_migration_initiating_start"),A(B.openThreadId,B.armadilloThreadId).then(function(){u("thread_migration_initiating_end"),w(!0)})["catch"](function(a){x.current="fail_to_init_thread_migration",E("error"),c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("fail_to_init_thread_migration"),v(x.current,!0)}))},[u,B,C,A,v,w]);var F=C!=null;d("Int64Hooks").useEffectInt64(function(){if(x.current==="")return;if(D!=="hide"){var a;c("logMessengerWebFalcoEvent")({threadKey:g.threadKey,threadType:g.threadType},"no_open_messages_in_cutover_thread",e,{cutoverThreadKey:(i||(i=d("I64"))).to_string((a=B==null?void 0:B.openThreadId)!=null?a:(i||(i=d("I64"))).neg_one),hasCutoverOpenThread:F.toString(),reason:x.current,showOpenMsgHistoryState:D})}y(D)},[B,e,D,F,g.threadKey,g.threadType,y]);a=C!=null&&(i||(i=d("I64"))).equal(C.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE));var G=(D==="show"||B!=null)&&(C==null||!a),H="";D==="loading"?H="openMsgHistory":G&&(C==null?H="cutoverOpenThread":a||(H="authorityLevel"));return k.jsx(t,{message:"Error while loading secure thread messages",threadKey:g.threadKey,children:k.jsxs(k.Fragment,{children:[k.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWCutoverShowHistoryDetermination-"+H,hold:D==="loading"||G}),b("cr:1957")!=null?k.jsx(b("cr:1957"),{cutoverOpenThread:D==="show"?C:void 0,entryPoint:e,messageListRef:f,thread:g}):k.jsx(d("MAWSecureThreadDetail_DEPRECATED.react").MAWSecureThreadDetail_DEPRECATED,{cutoverOpenThread:D==="show"?C:void 0,entryPoint:e,messageListRef:f,thread:g})]})})}a.displayName=a.name+" [from "+f.id+"]";function t(a){var b=a.children,d=a.message,e=a.threadKey;return k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},onError:function(a){c("MWFailChatTabOpenQPLEvent")(e,a.toString()),c("FBLogger")("messenger_web_product").catching(a).mustfix(d+": %s",a.toString())},children:b})}t.displayName=t.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSContactGenderToGenderConst",["GenderConst","I64","LSContactGender","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactGender").FEMALE)))return c("GenderConst").FEMALE_SINGULAR;else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactGender").MALE)))return c("GenderConst").MALE_SINGULAR;else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactGender").NEUTER)))return c("GenderConst").NEUTER_SINGULAR;else return c("GenderConst").NOT_A_PERSON}g["default"]=a}),98);
__d("MWXIconForListCell.react",["MWXIconStrict.react","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("gkx")("571")?16:20;function a(a){var b=a.color;a=a.icon;return i.jsx(c("MWXIconStrict.react"),{color:b,icon:a,size:j})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXListCell.react",["cr:2201","cr:617","react","xplatToDOMRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,c){var e=a.addOnBottom,f=a.addOnEnd,g=a.addOnStart,h=a.content,j=a.size;a=babelHelpers.objectWithoutPropertiesLoose(a,["addOnBottom","addOnEnd","addOnStart","content","size"]);if(b("cr:617")!=null)return i.jsx(b("cr:617"),babelHelpers["extends"]({addOnBottom:e,addOnEnd:f,addOnStart:g,addOnStartMarginTop:0,content:h,contentPaddingHorizontal:8,level:4,paddingVertical:8},a,{ref:c}));if(b("cr:2201")!=null){return i.jsx(b("cr:2201"),babelHelpers["extends"]({addOnBottom:e,addOnEnd:f,addOnStart:g,content:h,size:(e=j)!=null?e:"medium"},a,{ref:d("xplatToDOMRef").xplatToDOMRef(c)}))}return null}a.displayName=a.name+" [from "+f.id+"]";c=i.forwardRef(a);g["default"]=c}),98);
__d("MWXProfilePhoto.react",["CometProfilePhoto.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b){return i.jsx(c("CometProfilePhoto.react"),babelHelpers["extends"]({},a,{ref:b}))}a.displayName=a.name+" [from "+f.id+"]";b=i.forwardRef(a);g["default"]=b}),98);
__d("MWDialogContentTypeValues",["gkx"],(function(a,b,c,d,e,f,g){"use strict";a=c("gkx")("571")?4:3;b=c("gkx")("571")?"headlineEmphasized4":"headlineEmphasized2";d=c("gkx")("571")?"body4":"body3";e=c("gkx")("571")?"bodyLink4":"bodyLink3";f=c("gkx")("571")?"meta4":"meta3";g.textPairingLevel=a;g.textHeadlineType=b;g.textBodyType=d;g.textBodyLinkType=e;g.textMetaType=f}),98);
__d("MWDialogTextPairing.react",["MWDialogContentTypeValues","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("MWXTextPairing.react"),babelHelpers["extends"]({},a,{level:d("MWDialogContentTypeValues").textPairingLevel}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);